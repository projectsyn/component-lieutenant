parameters:
  kapitan:
    dependencies:
      # CRDs
      - type: https
        source: ${lieutenant:operator:manifest_url}/crds/syn.tools_clusters_crd.yaml
        output_path: manifests/crds/syn.tools_clusters_crd.yaml
      - type: https
        source: ${lieutenant:operator:manifest_url}/crds/syn.tools_gitrepos_crd.yaml
        output_path: manifests/crds/syn.tools_gitrepos_crd.yaml
      - type: https
        source: ${lieutenant:operator:manifest_url}/crds/syn.tools_tenants_crd.yaml
        output_path: manifests/crds/syn.tools_tenants_crd.yaml
      - type: https
        source: ${lieutenant:operator:manifest_url}/crds/syn.tools_tenanttemplates_crd.yaml
        output_path: manifests/crds/syn.tools_tenanttemplates_crd.yaml
    compile:
      - input_paths:
          - lieutenant/component/app.jsonnet
        input_type: jsonnet
        output_path: apps/
      - input_paths:
          - lieutenant/manifests/crds/
        input_type: copy
        output_path: lieutenant/00_crds/
      - input_paths:
          - lieutenant/component/main.jsonnet
        input_type: jsonnet
        output_path: lieutenant/
